<!doctype html><html lang><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Dockerコマンド - こつこつナレッジ</title><meta name=description content="はじめに Dockerを扱う場合、様々なコマンドが登場します。
この投稿は、コマンドについて徒然とまとめる投稿です。
Docker基礎知識 Dockerの特徴と、よくある疑問をまとめます。
Infrastructure as Code Dockerはインフラの状態をコードとして管理できます。
Dockerfileはイメージの構成を定義します。
docker-compose.ymlはコンテナの構成を定義します。
テキストで構成を管理できるので、差分管理や共有が早く簡単になります。
DockerHubとは?  Docker Hub はDocker社が管理するDockerイメージのレジストリ（保管場所）。 様々がDockerイメージが保存されており、ダウンロードして自分のコンテナ構成に組み込める。
Dockerのイメージとコンテナの違い DockerコンテナとはDockerイメージのインスタンスのこと。
イメージが設計図で、コンテナが実体。
Dockerのイメージとコンテナの違い VirtualBoxと何が違う？ Dockerは「コンテナ型仮想化」で、VirtualBoxは「ホスト型仮想化」。
ホスト型仮想化が、ゲストOSをシミュレートするため、リソースを多く消費する。
コンテナ型仮想化は、ホストOSから見ると単一プロセスで、ホストOSにカーネルを共有するため、消費リソースが少ない。
「Docker」を全く知らない人のために「Docker」の魅力を伝えるための「Docker」入門 DockerHubの操作 DockerHubにログイン docker login [OPTIONS] [SERVER] [flags] 例: docker login
イメージの検索 DockerHubからイメージを検索できる。
docker search [OPTIONS] TERM イメージのダウンロード docker pull [OPTIONS] NAME[:TAG|@DIGEST] イメージのアップロード docker push [OPTIONS] NAME[:TAG] ローカルのDockerイメージの操作 イメージ一覧 ローカルのイメージ一覧を表示
docker images [OPTIONS] [REPOSITORY[:TAG]] 実行中コンテナを一覧。
イメージ詳細情報表示 docker inspect [OPTIONS] NAME|ID [NAME|ID...] 例：docker inspect ruby:2.6.5"><meta name=author content><link rel=stylesheet href=https://tech.choihack.com/css/style.286185dba9215e324d8dc6ecb145e7c39ce0899ad05a79dbf6a66e8012be1cfc.css><link href=https://tech.choihack.com/custom.css rel=stylesheet><link rel=apple-touch-icon href=https://tech.choihack.com/apple-touch-icon.png><link rel=icon href=https://tech.choihack.com/favicon.ico><meta name=generator content="Hugo 0.85.0"><script async src="https://www.googletagmanager.com/gtag/js?id=G-V3H6ME1VJT"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-V3H6ME1VJT',{anonymize_ip:!1})}</script><meta property="og:title" content="Dockerコマンド"><meta property="og:description" content="Dockerコマンド"><meta property="og:type" content="article"><meta property="og:url" content="https://tech.choihack.com/post/others/docker%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-08-01T17:17:17+09:00"><meta property="article:modified_time" content="2021-08-01T17:17:17+09:00"><script>window.onload=function(){var a=Array.prototype.slice.call(document.querySelectorAll("pre"),0);a.forEach(function(b){var c=b.firstElementChild,d=c.dataset.lang,e=d?d.split(":")[1]:null,a;e&&(a=document.createElement('div'),a.textContent=e,a.classList.add('code-name'),b.insertBefore(a,c))})}</script></head><header class=header><nav class=nav><h1 class=logo><a href=https://tech.choihack.com/>こつこつナレッジ</a></h1><ul class=menu><li><a href=/>TOP</a></li><li><a href=/post/hugo>Hugo</a></li><li><a href=/post/gas>GAS</a></li><li><a href=/post/tradingview>TradingView</a></li><li><a href=/post/wordpress>WordPress</a></li><li><a href=/post/rubyonrails>RubyOnRails</a></li><li><a href=/post/others>雑記</a></li><li><a href=/search>検索</a></li></ul></nav><nav class=breadcrumb><ul><li><a href=https://tech.choihack.com/>TOP</a></li><li><a href=https://tech.choihack.com/post/>投稿</a></li><li><a href=https://tech.choihack.com/post/others/>雑記</a></li><li class=active>Dockerコマンド</li></ul></nav></header><body class="dark page"></body><main class=post><article><header class=post-header><h1 class=post-title>Dockerコマンド</h1><div class=post-meta>2021.08.01</div></header><div class=post-content><h2 id=はじめに>はじめに</h2><p>Dockerを扱う場合、様々なコマンドが登場します。<br>この投稿は、コマンドについて徒然とまとめる投稿です。</p><h2 id=docker基礎知識>Docker基礎知識</h2><p>Dockerの特徴と、よくある疑問をまとめます。</p><h3 id=infrastructure-as-code>Infrastructure as Code</h3><p>Dockerはインフラの状態をコードとして管理できます。<br>Dockerfileはイメージの構成を定義します。<br>docker-compose.ymlはコンテナの構成を定義します。</p><p>テキストで構成を管理できるので、差分管理や共有が早く簡単になります。</p><h3 id=dockerhubとは>DockerHubとは?</h3><p><a href=https://hub.docker.com/ target=_blank>Docker Hub</a>
はDocker社が管理するDockerイメージのレジストリ（保管場所）。
様々がDockerイメージが保存されており、ダウンロードして自分のコンテナ構成に組み込める。</p><h3 id=dockerのイメージとコンテナの違い>Dockerのイメージとコンテナの違い</h3><p>DockerコンテナとはDockerイメージのインスタンスのこと。<br>イメージが設計図で、コンテナが実体。<br><a href=https://blog.codecamp.jp/programming-docker-image-container target=_blank>Dockerのイメージとコンテナの違い</a></p><h3 id=virtualboxと何が違う>VirtualBoxと何が違う？</h3><p>Dockerは「コンテナ型仮想化」で、VirtualBoxは「ホスト型仮想化」。<br>ホスト型仮想化が、ゲストOSをシミュレートするため、リソースを多く消費する。<br>コンテナ型仮想化は、ホストOSから見ると単一プロセスで、ホストOSにカーネルを共有するため、消費リソースが少ない。<br><a href=https://qiita.com/bremen/items/4604f530fe25786240db target=_blank>「Docker」を全く知らない人のために「Docker」の魅力を伝えるための「Docker」入門</a></p><h2 id=dockerhubの操作>DockerHubの操作</h2><h3 id=dockerhubにログイン>DockerHubにログイン</h3><pre><code>docker login [OPTIONS] [SERVER] [flags]
</code></pre><p>例: <code>docker login</code></p><h3 id=イメージの検索>イメージの検索</h3><p>DockerHubからイメージを検索できる。</p><pre><code>docker search [OPTIONS] TERM
</code></pre><h3 id=イメージのダウンロード>イメージのダウンロード</h3><pre><code>docker pull [OPTIONS] NAME[:TAG|@DIGEST]
</code></pre><h3 id=イメージのアップロード>イメージのアップロード</h3><pre><code>docker push [OPTIONS] NAME[:TAG]
</code></pre><h2 id=ローカルのdockerイメージの操作>ローカルのDockerイメージの操作</h2><h3 id=イメージ一覧>イメージ一覧</h3><p>ローカルのイメージ一覧を表示</p><pre><code>docker images [OPTIONS] [REPOSITORY[:TAG]]
</code></pre><p>実行中コンテナを一覧。</p><h3 id=イメージ詳細情報表示>イメージ詳細情報表示</h3><pre><code>docker inspect [OPTIONS] NAME|ID [NAME|ID...]
</code></pre><p>例：<code>docker inspect ruby:2.6.5</code></p><h3 id=イメージにタグ付け>イメージにタグ付け</h3><pre><code>docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]
</code></pre><h3 id=イメージの削除>イメージの削除</h3><pre><code>docker rmi [OPTIONS] IMAGE [IMAGE...]
</code></pre><h2 id=dockerコンテナの操作>Dockerコンテナの操作</h2><h2 id=稼働コンテナの一覧表示>稼働コンテナの一覧表示</h2><pre><code>docker ps [OPTIONS]
</code></pre><p><code>-a</code>: 停止中コンテナも表示</p><p><code>docker ps -a --format "{{.ID}}: {{.Status}}"</code> のように、出力形式をフォーマットできる。<br>使用可能な変数は以下。</p><table><thead><tr><th>Placeholder</th><th>Description</th></tr></thead><tbody><tr><td>ID</td><td>Container ID</td></tr><tr><td>Image</td><td>Image ID</td></tr><tr><td>Command</td><td>Quoted command</td></tr><tr><td>CreatedAt</td><td>Time when the container was created.</td></tr><tr><td>RunningFor</td><td>Elapsed time since the container was started.</td></tr><tr><td>Ports</td><td>Exposed ports.</td></tr><tr><td>State</td><td>Container status (for example; “created”, “running”, “exited”).</td></tr><tr><td>Status</td><td>Container status with details about duration and health-status.</td></tr><tr><td>Size</td><td>Container disk size.</td></tr><tr><td>Names</td><td>Container names.</td></tr><tr><td>Labels</td><td>All labels assigned to the container.</td></tr><tr><td>Label</td><td>Value of a specific label for this container.</td></tr><tr><td>Mounts</td><td>Names of the volumes mounted in this container.</td></tr><tr><td>Networks</td><td>Names of the networks attached to this container.</td></tr></tbody></table><h3 id=コンテナの状況確認>コンテナの状況確認</h3><p>コンテナのリアルタイムの状況を表示。</p><pre><code>docker stats [OPTIONS] [CONTAINER...]
</code></pre><h3 id=コンテナ実行>コンテナ実行</h3><pre><code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
</code></pre><p>例：<br><code>docker run -d centos /bin/ping localhost</code><br>コンテナのバックグラウンド起動。</p><h3 id=コンテナ停止>コンテナ停止</h3><pre><code>docker stop [OPTIONS] CONTAINER [CONTAINER...]
</code></pre><h3 id=コンテナ再起動>コンテナ再起動</h3><pre><code>docker restart [OPTIONS] CONTAINER [CONTAINER...]
</code></pre><h3 id=コンテナ削除>コンテナ削除</h3><pre><code>docker rm [OPTIONS] CONTAINER [CONTAINER...]
</code></pre><p><code>-f</code>: コンテナが稼働していたら、停止して強制的に停止</p><h3 id=稼働コンテナへコマンド実行>稼働コンテナへコマンド実行</h3><pre><code>docker exec [OPTIONS] CONTAINER COMMAND [ARG...]
</code></pre><p>例： <code>docker exec -it myimage /bin/bash</code></p><h3 id=コンテナとホスト間のファイルコピー>コンテナとホスト間のファイルコピー</h3><pre><code>docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-
docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH
</code></pre><h3 id=volumeの一覧>volumeの一覧</h3><pre><code>docker volume ls [OPTIONS]
</code></pre><h3 id=volumeの削除>volumeの削除</h3><pre><code>docker volume rm [OPTIONS] VOLUME [VOLUME...]
</code></pre><h2 id=参考>参考</h2><ul><li><a href=https://qiita.com/nimusukeroku/items/72bc48a8569a954c7aa2 target=_blank>Dockerコマンド一覧</a></li></ul></div><div class=prev-next><a class=prev href=https://tech.choihack.com/post/others/git_submodule%E3%82%92%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B/><article class=article-card><header class=article-card-header><h2>Git submoduleを理解する</h2></header><section class=article-card-content><p>はじめに Git submoduleとは外部のGitリポジトリを、自分のリポジトリのサブディレクトリとして登録する仕組みです。
コマンドの使い方 頻出するコマンドをまとめます。
今回はサンプルとして、MainroadというHugoのテーマを使います。
ローカルワークスペースのthemes/mainroadディレクトリ以下に追加していきます。
追加 git submodule add &lt;リポジトリのURL> &lt;ローカルのサブディレクトリ>
git submodule add https://github.com/Vimux/Mainroad.git themes/mainroad themes/mainroad以下にmainroadがクローンされます。
更新 git submodule update
削除 git submodule deinit -f &lt;サブモジュール>: submoduleを削除
git rm -f &lt;サブモジュール>: gitの管理から削除
rm -rf .git/modules/&lt;サブモジュール>: .gitからgit情報を削除
git submodule deinit themes/mainroad git rm -f themes/mainroad rm -rf .git/modules/themes/mainroad submoduleを追加したときに起こっていること submoduleを理解するために、どんなことが起こっているのかを整理しておきましょう。
追加されたファイルを確認 $ git status On branch master Changes to be committed: (use "git restore --staged &lt;file>..." to unstage) new file: ....</p></section><footer class=article-card-footer><time>2021-07-20</time></footer></article></a><a class=next href=https://tech.choihack.com/post/others/cookie%E3%81%AE%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E6%95%B4%E7%90%86/><article class=article-card><header class=article-card-header><h2>Cookieのパラメータ整理</h2></header><section class=article-card-content><p>はじめに Cookieの設定をする時に、意外と色々パラメータがあります。
何度も調べては忘れるので、ここでわかりやすくまとめて調べるのは最後にしたいと思います。
パラメータの種類 GoogleChromeのDeveloperToolで調べると、以下のパラメータがあります。
Name Value Domain Path Expires/Max-Age Size HttpOnly Secure SameSite Sameparty Priority これらを対象にそれぞれのパラメータの意味と、設定される値について見ていきます。 Name/Value 早速説明を省きます。
Cookie名とCookieの値です。
Expires/Max-Age Cookieの有効期限です。
指定しない場合は、セッション終了までです。
Max-Ageの単位は秒です。
Domain どのホストの場合にCookieを送信するかを指定します。
デフォルトはCookieを保存したページのホストと同じページにアクセスした場合だけCookieを送信します。
例えば、example.com/page.htmlにアクセスした時に保存されたCookieは、同じくexample.com のホストのページにアクセスした場合に送信されます。
この時、サブドメインへアクセスしてもCookieは送信されません。
あえてDomainを指定し場合は、サブドメインを含めてCookieを送信できます。
Domainの設定は以下のように行います。
document.cookie = 'A=B; Domain=example.com'; Path PathはどのパスでCookieを送信するかを許可します。
Secure Httpsの通信でのみ使用できる。
document.cookie = 'A=B; Secure'; HttpOnly JavaScriptで生成されたCookieはこのフラグを含むことができない フラグを含む場合は、JavaScriptで取得もできない document.cookie = 'A=B; HttpOnly'; HttpとかHttpsとかに関連するCookieかと思うような名前ですが、Httpリクエスト経由でしか使用できないという意味のようですね。
SameSite 別サイトに遷移する時に、遷移先サイトのCookieを送信するかどうかを設定できます。
設定可能な値は、以下のStrict、Lax、Noneの3つです。
遷移元をAサイト、遷移先をBサイトとしましょう。
AサイトからBサイトへ遷移する時、BサイトのCookieが送信されるか設定によって以下のようになります。
Strict：BサイトのCookieを送信しない Lax：GETやHEADなど、安全なメソッドの場合だけ送信する None：制限なくBサイトのCookieを送信する Chromeでは、SameSiteが設定されていない場合は、Lax扱いになります。
また、Noneを指定する場合は、同時にSecrue属性が必須です。
つまり、制限なく別サイトにCookieを送信するには、HTTPS通信でないといけないということになります。
参考 Cookieで指定可能な属性の種類と設定方法 ...</p></section><footer class=article-card-footer><time>2021-08-05</time></footer></article></a></div></article><aside class=aside><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#docker基礎知識>Docker基礎知識</a><ul><li><a href=#infrastructure-as-code>Infrastructure as Code</a></li><li><a href=#dockerhubとは>DockerHubとは?</a></li><li><a href=#dockerのイメージとコンテナの違い>Dockerのイメージとコンテナの違い</a></li><li><a href=#virtualboxと何が違う>VirtualBoxと何が違う？</a></li></ul></li><li><a href=#dockerhubの操作>DockerHubの操作</a><ul><li><a href=#dockerhubにログイン>DockerHubにログイン</a></li><li><a href=#イメージの検索>イメージの検索</a></li><li><a href=#イメージのダウンロード>イメージのダウンロード</a></li><li><a href=#イメージのアップロード>イメージのアップロード</a></li></ul></li><li><a href=#ローカルのdockerイメージの操作>ローカルのDockerイメージの操作</a><ul><li><a href=#イメージ一覧>イメージ一覧</a></li><li><a href=#イメージ詳細情報表示>イメージ詳細情報表示</a></li><li><a href=#イメージにタグ付け>イメージにタグ付け</a></li><li><a href=#イメージの削除>イメージの削除</a></li></ul></li><li><a href=#dockerコンテナの操作>Dockerコンテナの操作</a></li><li><a href=#稼働コンテナの一覧表示>稼働コンテナの一覧表示</a><ul><li><a href=#コンテナの状況確認>コンテナの状況確認</a></li><li><a href=#コンテナ実行>コンテナ実行</a></li><li><a href=#コンテナ停止>コンテナ停止</a></li><li><a href=#コンテナ再起動>コンテナ再起動</a></li><li><a href=#コンテナ削除>コンテナ削除</a></li><li><a href=#稼働コンテナへコマンド実行>稼働コンテナへコマンド実行</a></li><li><a href=#コンテナとホスト間のファイルコピー>コンテナとホスト間のファイルコピー</a></li><li><a href=#volumeの一覧>volumeの一覧</a></li><li><a href=#volumeの削除>volumeの削除</a></li></ul></li><li><a href=#参考>参考</a></li></ul></nav><h2>関連書籍</h2><div class=amazon><a target=_blank href="https://www.amazon.co.jp/dp/B015IZT854/ref=nosim?tag=tech-choihack0b-22"><img class=amazon-img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B015IZT854&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL350_&tag=tech-choihack0b-22"><section class=amazon-title><p>Amazon</p><p>Docker実践入門――Linuxコンテナ技術の基礎から応用まで</p></section></a></div><div class="ads side"><h2>おすすめ</h2><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=21&l=ur1&category=kindleunlimited&banner=178KN9KSS2XDCENS02G2&f=ifr&linkID=81378df7265b0adc45354f106ee4f650&t=tech-choihack-22&tracking_id=tech-choihack-22" width=125 height=125 scrolling=no border=0 marginwidth=0 style=border:none frameborder=0></iframe></div></aside></main></body><div class="ads footer"><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=48&l=ur1&category=audible&banner=193071V4XXGHG0SQJB02&f=ifr&linkID=2f33203e23e50f0542adbd748b7ba6d8&t=tech-choihack-22&tracking_id=tech-choihack-22" width=728 height=90 scrolling=no border=0 marginwidth=0 style=border:none frameborder=0></iframe></div><footer class=footer><p class=text-center>© - 2021 - こつこつナレッジ</p></footer><script src=https://tech.choihack.com/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script></html>