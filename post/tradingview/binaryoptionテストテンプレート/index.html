<!doctype html><html lang><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>BinaryOptionテストテンプレート - こつこつナレッジ</title><meta name=description content="はじめに バイオプと通常のFXとは全く異なるため、通常TradingViewではバイオプロジックの検証ができません。
ですが、指定した期間で強制決済した結果を集計することで、バイオプとしてのロジックを検証することができます。
今回は、テンプレートを見つけましたので確認していきます。
https://jp.tradingview.com/script/pvnR5RYJ-Binary-Options-Strategy-Template/
解説 以下は終値が単純移動平均より上ならBUY、下ならSELLという単純なロジックだけでバイオプをした場合の検証です。
これを実際のロジックに置き換えて作る必要があります。
その前提で、このスクリプトを見ていきましょう。
//@version=4 strategy(&#34;Binary Options Strategy Template&#34;, overlay=true) // In this code we track the bar where a position was opened and close the position // aftera specified number of bars. The objective of this script is testing long/short signals // for knowing the amount of times it would turn a profit or not.  // User input for amount of bars till close barsTillClose = input(5, minval=2, title=&#34;Amount of Bars Till Close Position&#34;) // SIMPLE ENTRY LOGIC (insert long/short signal here) sma = sma(close, 14) strategy."><meta name=author content><link rel=stylesheet href=https://tech.choihack.com/css/style.5e3c1b94e7a3169da08d890a552f1f5104fb412b9941455faeaa419605a355f5.css><link href=https://tech.choihack.com/custom.css rel=stylesheet><link rel=apple-touch-icon href=https://tech.choihack.com/apple-touch-icon.png><link rel=icon href=https://tech.choihack.com/favicon.ico><meta name=generator content="Hugo 0.85.0"><script async src="https://www.googletagmanager.com/gtag/js?id=G-V3H6ME1VJT"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-V3H6ME1VJT',{anonymize_ip:!1})}</script><meta property="og:title" content="BinaryOptionテストテンプレート"><meta property="og:description" content="BinaryOptionテストテンプレート"><meta property="og:type" content="article"><meta property="og:url" content="https://tech.choihack.com/post/tradingview/binaryoption%E3%83%86%E3%82%B9%E3%83%88%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-09-11T10:15:33+09:00"><meta property="article:modified_time" content="2021-09-11T10:15:33+09:00"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7379986362181342" crossorigin=anonymous></script><script>window.onload=function(){var a=Array.prototype.slice.call(document.querySelectorAll("pre"),0);a.forEach(function(b){var c=b.firstElementChild,d=c.dataset.lang,e=d?d.split(":")[1]:null,a;e&&(a=document.createElement('div'),a.textContent=e,a.classList.add('code-name'),b.insertBefore(a,c))})}</script></head><header class=header><nav class=nav><h1 class=logo><a href=https://tech.choihack.com/>こつこつナレッジ</a></h1><ul class=menu><li><a href=/>TOP</a></li><li><a href=/post/hugo>Hugo</a></li><li><a href=/post/gas>GAS</a></li><li><a href=/post/tradingview>TradingView</a></li><li><a href=/post/wordpress>WordPress</a></li><li><a href=/post/rubyonrails>RubyOnRails</a></li><li><a href=/post/gcp>GCP</a></li><li><a href=/post/others>雑記</a></li><li><a href=/search>検索</a></li></ul></nav><nav class=breadcrumb><ul><li><a href=https://tech.choihack.com/>TOP</a></li><li><a href=https://tech.choihack.com/post/>投稿</a></li><li><a href=https://tech.choihack.com/post/tradingview/>TradingView</a></li><li class=active>BinaryOptionテストテンプレート</li></ul></nav></header><body class="dark page"></body><main class=post><article><header class=post-header><h1 class=post-title>BinaryOptionテストテンプレート</h1><div class=post-meta>2021.09.11</div></header><div class=post-content><h2 id=はじめに>はじめに</h2><p>バイオプと通常のFXとは全く異なるため、通常TradingViewではバイオプロジックの検証ができません。<br>ですが、指定した期間で強制決済した結果を集計することで、バイオプとしてのロジックを検証することができます。<br>今回は、テンプレートを見つけましたので確認していきます。<br><a href=https://jp.tradingview.com/script/pvnR5RYJ-Binary-Options-Strategy-Template/>https://jp.tradingview.com/script/pvnR5RYJ-Binary-Options-Strategy-Template/</a></p><h2 id=解説>解説</h2><p>以下は終値が単純移動平均より上ならBUY、下ならSELLという単純なロジックだけでバイオプをした場合の検証です。<br>これを実際のロジックに置き換えて作る必要があります。<br>その前提で、このスクリプトを見ていきましょう。</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>//@version=4
</span><span class=c1></span><span class=nx>strategy</span><span class=p>(</span><span class=s2>&#34;Binary Options Strategy Template&#34;</span><span class=p>,</span> <span class=nx>overlay</span><span class=o>=</span><span class=kc>true</span><span class=p>)</span>

<span class=c1>// In this code we track the bar where a position was opened and close the position
</span><span class=c1>// aftera specified number of bars. The objective of this script is testing long/short signals
</span><span class=c1>// for knowing the amount of times it would turn a profit or not.
</span><span class=c1></span>
<span class=c1>// User input for amount of bars till close
</span><span class=c1></span><span class=nx>barsTillClose</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=nx>minval</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Amount of Bars Till Close Position&#34;</span><span class=p>)</span>


<span class=c1>// SIMPLE ENTRY LOGIC (insert long/short signal here)
</span><span class=c1></span><span class=nx>sma</span> <span class=o>=</span> <span class=nx>sma</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=mi>14</span><span class=p>)</span>
<span class=nx>strategy</span><span class=p>.</span><span class=nx>entry</span><span class=p>(</span><span class=s2>&#34;Long&#34;</span><span class=p>,</span> <span class=nx>strategy</span><span class=p>.</span><span class=kr>long</span><span class=p>,</span> <span class=nx>when</span><span class=o>=</span><span class=nx>close</span> <span class=o>&gt;</span> <span class=nx>sma</span><span class=p>)</span>
<span class=nx>strategy</span><span class=p>.</span><span class=nx>entry</span><span class=p>(</span><span class=s2>&#34;Short&#34;</span><span class=p>,</span> <span class=nx>strategy</span><span class=p>.</span><span class=kr>long</span><span class=p>,</span> <span class=nx>when</span><span class=o>=</span><span class=nx>close</span> <span class=o>&lt;</span> <span class=nx>sma</span><span class=p>)</span>

<span class=c1>// Track the Entry Bar
</span><span class=c1></span><span class=nx>entryTime</span> <span class=o>=</span> <span class=kr>float</span><span class=p>(</span><span class=nx>na</span><span class=p>)</span>
<span class=nx>timeClose</span> <span class=o>=</span> <span class=nx>bool</span><span class=p>(</span><span class=nx>na</span><span class=p>)</span>
<span class=nx>entryTime</span> <span class=o>:=</span> <span class=nx>timeClose</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=nx>na</span> <span class=o>:</span> <span class=nx>strategy</span><span class=p>.</span><span class=nx>position_size</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>&gt;</span> <span class=nx>strategy</span><span class=p>.</span><span class=nx>position_size</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=nx>bar_index</span> <span class=o>:</span> <span class=nx>entryTime</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>

<span class=c1>// See if we need to close
</span><span class=c1></span><span class=nx>timeClose</span> <span class=o>:=</span> <span class=nx>bar_index</span> <span class=o>&gt;=</span> <span class=nx>entryTime</span><span class=o>+</span><span class=p>(</span><span class=nx>barsTillClose</span><span class=o>-</span><span class=mi>2</span><span class=p>)</span>
<span class=nx>strategy</span><span class=p>.</span><span class=nx>close</span><span class=p>(</span><span class=s2>&#34;Long&#34;</span><span class=p>,</span> <span class=nx>when</span><span class=o>=</span><span class=nx>timeClose</span><span class=p>)</span>
<span class=nx>strategy</span><span class=p>.</span><span class=nx>close</span><span class=p>(</span><span class=s2>&#34;Short&#34;</span><span class=p>,</span> <span class=nx>when</span><span class=o>=</span><span class=nx>timeClose</span><span class=p>)</span>

<span class=nx>plot</span><span class=p>(</span><span class=nx>sma</span><span class=p>)</span>
</code></pre></div><h3 id=エントリーロジック>エントリーロジック</h3><p>単純な終値が単純移動平均線を超えるかどうかだけのロジックでエントリーを決めている。</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// SIMPLE ENTRY LOGIC (insert long/short signal here)
</span><span class=c1></span><span class=nx>sma</span> <span class=o>=</span> <span class=nx>sma</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=mi>14</span><span class=p>)</span>
<span class=nx>strategy</span><span class=p>.</span><span class=nx>entry</span><span class=p>(</span><span class=s2>&#34;Long&#34;</span><span class=p>,</span> <span class=nx>strategy</span><span class=p>.</span><span class=kr>long</span><span class=p>,</span> <span class=nx>when</span><span class=o>=</span><span class=nx>close</span> <span class=o>&gt;</span> <span class=nx>sma</span><span class=p>)</span>
<span class=nx>strategy</span><span class=p>.</span><span class=nx>entry</span><span class=p>(</span><span class=s2>&#34;Short&#34;</span><span class=p>,</span> <span class=nx>strategy</span><span class=p>.</span><span class=kr>long</span><span class=p>,</span> <span class=nx>when</span><span class=o>=</span><span class=nx>close</span> <span class=o>&lt;</span> <span class=nx>sma</span><span class=p>)</span>
</code></pre></div><ul><li><code>sma</code>: 単純移動平均線</li><li><a href=https://jp.tradingview.com/pine-script-reference/#fun_strategy%7bdot%7dentry target=_blank>strategy.entry</a>
:<ul><li>構文: <code>strategy.entry(id, long, qty, limit, stop, oca_name, oca_type, comment, when, alert_message) → void</code></li><li><code>id(series[string])</code>: 注文の識別子。識別子を指定する事で注文の変更やキャンセルが可能</li><li><code>long (bool)</code>: 市場ポジションの方向: <code>strategy.long</code>はロング。<code>strategy.short</code>はショート</li><li><code>when (bool)</code>: 注文の条件。条件が<code>true</code>の場合注文が発注される。条件が<code>false</code>の場合には何も起こらない<br>以前発注された同じIDの注文はキャンセルされない。<br>デフォルト値は<code>true</code>。</li></ul></li></ul><h2 id=トラッキング>トラッキング</h2><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>// Track the Entry Bar
</span><span class=c1></span><span class=nx>entryTime</span> <span class=o>=</span> <span class=kr>float</span><span class=p>(</span><span class=nx>na</span><span class=p>)</span>
<span class=nx>timeClose</span> <span class=o>=</span> <span class=nx>bool</span><span class=p>(</span><span class=nx>na</span><span class=p>)</span>
<span class=nx>entryTime</span> <span class=o>:=</span> <span class=nx>timeClose</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=nx>na</span> <span class=o>:</span> <span class=nx>strategy</span><span class=p>.</span><span class=nx>position_size</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>&gt;</span> <span class=nx>strategy</span><span class=p>.</span><span class=nx>position_size</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=nx>bar_index</span> <span class=o>:</span> <span class=nx>entryTime</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
<span class=c1>// See if we need to close
</span><span class=c1></span><span class=nx>timeClose</span> <span class=o>:=</span> <span class=nx>bar_index</span> <span class=o>&gt;=</span> <span class=nx>entryTime</span><span class=o>+</span><span class=p>(</span><span class=nx>barsTillClose</span><span class=o>-</span><span class=mi>2</span><span class=p>)</span>
</code></pre></div><ul><li><a href=https://jp.tradingview.com/pine-script-reference/#var_strategy%7bdot%7dposition_size target=_blank>strategy.position_size</a>
:<ul><li>現在の市場ポジションの方向とサイズ。値が0より大きい場合、市場ポジションは買い。値が0より少ない場合、市場ポジションは売り。</li></ul></li><li><code>entryTime := timeClose[1] ? na : strategy.position_size[0] > strategy.position_size[1] ? bar_index : entryTime[1]</code><ul><li>１つ過去のバーでクローズしていれば<code>na</code></li><li>エントリーした場合は<code>bar_index</code></li><li>それ以外は過去の値を継続</li></ul></li><li><code>timeClose := bar_index >= entryTime+(barsTillClose-2)</code><ul><li>現在の<code>bar_index</code>がエントリーした時のbar_indexに<code>barsTillClose</code>を足して２で引いた値以上の場合に決済</li></ul></li></ul><h2 id=決済ロジック>決済ロジック</h2><p>バイオプの指定期間以上になったら決済する。</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=nx>strategy</span><span class=p>.</span><span class=nx>close</span><span class=p>(</span><span class=s2>&#34;Long&#34;</span><span class=p>,</span> <span class=nx>when</span><span class=o>=</span><span class=nx>timeClose</span><span class=p>)</span>
<span class=nx>strategy</span><span class=p>.</span><span class=nx>close</span><span class=p>(</span><span class=s2>&#34;Short&#34;</span><span class=p>,</span> <span class=nx>when</span><span class=o>=</span><span class=nx>timeClose</span><span class=p>)</span>
</code></pre></div><ul><li><a href=https://jp.tradingview.com/pine-script-reference/#var_bar_index target=_blank>bar_index</a>
:<ul><li>type: series[integer]</li><li>現在のバーのインデックス。ナンバリングは0から始まり、最初のバーのインデックスは0</li></ul></li><li><a href=https://jp.tradingview.com/pine-script-reference/#fun_strategy%7bdot%7dclose target=_blank>strategy.close</a>
:<ul><li>構文: <code>strategy.close(id, when, comment, qty, qty_percent, alert_message) → void</code></li></ul></li></ul></div><div class=prev-next><a class=prev href=https://tech.choihack.com/post/tradingview/binaryoption%E7%94%A8%E3%82%A4%E3%83%B3%E3%82%B8%E3%82%B1%E3%83%BC%E3%82%BF%E3%83%BC/><article class=article-card><header class=article-card-header><h2>BinaryOption用インジケーター</h2></header><section class=article-card-content><p>はじめに TradingViewでBinaryOption用のインジケーターを研究中です。
今回は以下のインジケーターを見てみます。 https://jp.tradingview.com/script/s48QJlfi-Vdub-Binary-Options-SniperVX-v1/
PineScript //@version=4 study("Vdub Binary Options SniperVX v1", overlay=true, shorttitle="Vdub_SniperBX_v1") // //====================channel====================== len = input(8, minval=1) src = input(close, title="Source") out = sma(src, len) last8h = highest(close, 13) lastl8 = lowest(close, 13) bearish = cross(close,out) == 1 and close[1] > close bullish = cross(close,out) == 1 and close[1] &lt; close channel2=input(false, title="Bar Channel On/Off") ul2=plot(channel2?last8h:last8h==nz(last8h[1])?last8h:na, color=color.black, linewidth=1, style=plot.style_linebr, title="Candle body resistance level top", offset=0) ll2=plot(channel2?lastl8:lastl8==nz(lastl8[1])?lastl8:na, color=color.black, linewidth=1, style=plot....</p></section><footer class=article-card-footer><time>2021-09-10</time></footer></article></a></div></article><aside class=aside><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#解説>解説</a><ul><li><a href=#エントリーロジック>エントリーロジック</a></li></ul></li><li><a href=#トラッキング>トラッキング</a></li><li><a href=#決済ロジック>決済ロジック</a></li></ul></nav><h2>関連書籍</h2><div class=amazon><p>Amazon</p><a target=_blank href="https://www.amazon.co.jp/dp/4344920791/ref=nosim?tag=tech-choihack03-22"><img class=amazon-img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4344920791&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL350_&tag=tech-choihack03-22"><section class=amazon-title><p>あなたの FX 投資を成功へと導くTradingView究極ガイド</p></section></a></div><div class="ads side"><h2>おすすめ</h2><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=21&l=ur1&category=kindleunlimited&banner=178KN9KSS2XDCENS02G2&f=ifr&linkID=81378df7265b0adc45354f106ee4f650&t=tech-choihack-22&tracking_id=tech-choihack-22" width=125 height=125 scrolling=no border=0 marginwidth=0 style=border:none frameborder=0></iframe></div></aside></main></body><footer class=footer><h2>本は聴く時代に！圧倒的おすすめ！</h2><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=12&l=ur1&category=audible&banner=04TW4TSNDNB96FMCBT82&f=ifr&linkID=4522149f1c95f7594ee105cf8eef4890&t=peperon41410c-22&tracking_id=peperon41410c-22" width=300 height=250 scrolling=no border=0 marginwidth=0 style=border:none frameborder=0></iframe><p class=text-center>© - 2021 - こつこつナレッジ</p></footer><script src=https://tech.choihack.com/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script></html>