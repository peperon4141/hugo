<!doctype html><html lang><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>BinaryOption用インジケーター - こつこつナレッジ</title><meta name=description content="はじめに TradingViewでBinaryOption用のインジケーターを研究中です。
今回は以下のインジケーターを見てみます。 https://jp.tradingview.com/script/s48QJlfi-Vdub-Binary-Options-SniperVX-v1/
PineScript //@version=4 study(&#34;Vdub Binary Options SniperVX v1&#34;, overlay=true, shorttitle=&#34;Vdub_SniperBX_v1&#34;) // //====================channel====================== len = input(8, minval=1) src = input(close, title=&#34;Source&#34;) out = sma(src, len) last8h = highest(close, 13) lastl8 = lowest(close, 13) bearish = cross(close,out) == 1 and close[1] > close bullish = cross(close,out) == 1 and close[1] < close channel2=input(false, title=&#34;Bar Channel On/Off&#34;) ul2=plot(channel2?last8h:last8h==nz(last8h[1])?last8h:na, color=color.black, linewidth=1, style=plot.style_linebr, title=&#34;Candle body resistance level top&#34;, offset=0) ll2=plot(channel2?lastl8:lastl8==nz(lastl8[1])?lastl8:na, color=color.black, linewidth=1, style=plot."><meta name=author content><link rel=stylesheet href=https://tech.choihack.com/css/style.5e3c1b94e7a3169da08d890a552f1f5104fb412b9941455faeaa419605a355f5.css><link href=https://tech.choihack.com/custom.css rel=stylesheet><link rel=apple-touch-icon href=https://tech.choihack.com/apple-touch-icon.png><link rel=icon href=https://tech.choihack.com/favicon.ico><meta name=generator content="Hugo 0.85.0"><script async src="https://www.googletagmanager.com/gtag/js?id=G-V3H6ME1VJT"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-V3H6ME1VJT',{anonymize_ip:!1})}</script><meta property="og:title" content="BinaryOption用インジケーター"><meta property="og:description" content="BinaryOption用インジケーター"><meta property="og:type" content="article"><meta property="og:url" content="https://tech.choihack.com/post/tradingview/binaryoption%E7%94%A8%E3%82%A4%E3%83%B3%E3%82%B8%E3%82%B1%E3%83%BC%E3%82%BF%E3%83%BC/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-09-10T19:13:45+09:00"><meta property="article:modified_time" content="2021-09-10T19:13:45+09:00"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7379986362181342" crossorigin=anonymous></script><script>window.onload=function(){var a=Array.prototype.slice.call(document.querySelectorAll("pre"),0);a.forEach(function(b){var c=b.firstElementChild,d=c.dataset.lang,e=d?d.split(":")[1]:null,a;e&&(a=document.createElement('div'),a.textContent=e,a.classList.add('code-name'),b.insertBefore(a,c))})}</script></head><header class=header><nav class=nav><h1 class=logo><a href=https://tech.choihack.com/>こつこつナレッジ</a></h1><ul class=menu><li><a href=/>TOP</a></li><li><a href=/post/hugo>Hugo</a></li><li><a href=/post/gas>GAS</a></li><li><a href=/post/tradingview>TradingView</a></li><li><a href=/post/wordpress>WordPress</a></li><li><a href=/post/rubyonrails>RubyOnRails</a></li><li><a href=/post/gcp>GCP</a></li><li><a href=/post/others>雑記</a></li><li><a href=/search>検索</a></li></ul></nav><nav class=breadcrumb><ul><li><a href=https://tech.choihack.com/>TOP</a></li><li><a href=https://tech.choihack.com/post/>投稿</a></li><li><a href=https://tech.choihack.com/post/tradingview/>TradingView</a></li><li class=active>BinaryOption用インジケーター</li></ul></nav></header><body class="dark page"></body><main class=post><article><header class=post-header><h1 class=post-title>BinaryOption用インジケーター</h1><div class=post-meta>2021.09.10</div></header><div class=post-content><h2 id=はじめに>はじめに</h2><p>TradingViewでBinaryOption用のインジケーターを研究中です。<br>今回は以下のインジケーターを見てみます。
<a href=https://jp.tradingview.com/script/s48QJlfi-Vdub-Binary-Options-SniperVX-v1/>https://jp.tradingview.com/script/s48QJlfi-Vdub-Binary-Options-SniperVX-v1/</a></p><h2 id=pinescript>PineScript</h2><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>//@version=4
</span><span class=c1></span><span class=nx>study</span><span class=p>(</span><span class=s2>&#34;Vdub Binary Options SniperVX  v1&#34;</span><span class=p>,</span> <span class=nx>overlay</span><span class=o>=</span><span class=kc>true</span><span class=p>,</span> <span class=nx>shorttitle</span><span class=o>=</span><span class=s2>&#34;Vdub_SniperBX_v1&#34;</span><span class=p>)</span>
<span class=c1>//
</span><span class=c1>//====================channel======================
</span><span class=c1></span><span class=nx>len</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=nx>minval</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=nx>src</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Source&#34;</span><span class=p>)</span>
<span class=nx>out</span> <span class=o>=</span> <span class=nx>sma</span><span class=p>(</span><span class=nx>src</span><span class=p>,</span> <span class=nx>len</span><span class=p>)</span>
<span class=nx>last8h</span> <span class=o>=</span> <span class=nx>highest</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=mi>13</span><span class=p>)</span>
<span class=nx>lastl8</span> <span class=o>=</span> <span class=nx>lowest</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=mi>13</span><span class=p>)</span>
<span class=nx>bearish</span> <span class=o>=</span> <span class=nx>cross</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span><span class=nx>out</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span> <span class=nx>and</span> <span class=nx>close</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>&gt;</span> <span class=nx>close</span>
<span class=nx>bullish</span> <span class=o>=</span> <span class=nx>cross</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span><span class=nx>out</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span> <span class=nx>and</span> <span class=nx>close</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>&lt;</span> <span class=nx>close</span>
<span class=nx>channel2</span><span class=o>=</span><span class=nx>input</span><span class=p>(</span><span class=kc>false</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Bar Channel On/Off&#34;</span><span class=p>)</span>
<span class=nx>ul2</span><span class=o>=</span><span class=nx>plot</span><span class=p>(</span><span class=nx>channel2</span><span class=o>?</span><span class=nx>last8h</span><span class=o>:</span><span class=nx>last8h</span><span class=o>==</span><span class=nx>nz</span><span class=p>(</span><span class=nx>last8h</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span><span class=o>?</span><span class=nx>last8h</span><span class=o>:</span><span class=nx>na</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>black</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>plot</span><span class=p>.</span><span class=nx>style_linebr</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Candle body resistance level top&#34;</span><span class=p>,</span> <span class=nx>offset</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=nx>ll2</span><span class=o>=</span><span class=nx>plot</span><span class=p>(</span><span class=nx>channel2</span><span class=o>?</span><span class=nx>lastl8</span><span class=o>:</span><span class=nx>lastl8</span><span class=o>==</span><span class=nx>nz</span><span class=p>(</span><span class=nx>lastl8</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span><span class=o>?</span><span class=nx>lastl8</span><span class=o>:</span><span class=nx>na</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>black</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>plot</span><span class=p>.</span><span class=nx>style_linebr</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Candle body resistance level bottom&#34;</span><span class=p>,</span> <span class=nx>offset</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=c1>//
</span><span class=c1>//--------------------Trend colour ema------------------------------------------------//    ema trend direction trigger For Singals 1 &amp; 2
</span><span class=c1></span><span class=nx>src0</span> <span class=o>=</span> <span class=nx>close</span><span class=p>,</span> <span class=nx>len0</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=mi>13</span><span class=p>,</span> <span class=nx>minval</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Trend Change EMA&#34;</span><span class=p>)</span>
<span class=nx>ema0</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>src0</span><span class=p>,</span> <span class=nx>len0</span><span class=p>)</span>
<span class=nx>plot_color</span> <span class=o>=</span> <span class=nx>ema0</span> <span class=o>&gt;=</span> <span class=nx>ema0</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>  <span class=o>?</span> <span class=nx>color</span><span class=p>.</span><span class=nx>lime</span><span class=o>:</span> <span class=nx>ema0</span> <span class=o>&lt;</span> <span class=nx>ema0</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>?</span> <span class=nx>color</span><span class=p>.</span><span class=nx>red</span> <span class=o>:</span> <span class=nx>na</span>
<span class=nx>plot</span><span class=p>(</span><span class=nx>ema0</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;EMA&#34;</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>plot</span><span class=p>.</span><span class=nx>style_line</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>color</span> <span class=o>=</span> <span class=nx>plot_color</span><span class=p>)</span>
<span class=c1>//
</span><span class=c1>//--Modified vyacheslav.shindin-------------------------------------------------//           Signal 1
</span><span class=c1>//Configured ema signal output
</span><span class=c1></span><span class=nx>slow</span> <span class=o>=</span> <span class=mi>8</span>
<span class=nx>fast</span> <span class=o>=</span> <span class=mi>5</span>
<span class=nx>vh1</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>highest</span><span class=p>(</span><span class=nx>avg</span><span class=p>(</span><span class=nx>low</span><span class=p>,</span> <span class=nx>close</span><span class=p>),</span> <span class=nx>fast</span><span class=p>),</span> <span class=mi>5</span><span class=p>)</span>
<span class=nx>vl1</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>lowest</span><span class=p>(</span><span class=nx>avg</span><span class=p>(</span><span class=nx>high</span><span class=p>,</span> <span class=nx>close</span><span class=p>),</span> <span class=nx>slow</span><span class=p>),</span> <span class=mi>8</span><span class=p>)</span>
<span class=c1>//
</span><span class=c1></span><span class=nx>e_ema1</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=nx>e_ema2</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>e_ema1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=nx>e_ema3</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>e_ema2</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=nx>tema</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>*</span> <span class=p>(</span><span class=nx>e_ema1</span> <span class=o>-</span> <span class=nx>e_ema2</span><span class=p>)</span> <span class=o>+</span> <span class=nx>e_ema3</span>
<span class=c1>//
</span><span class=c1></span><span class=nx>e_e1</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=mi>8</span><span class=p>)</span>
<span class=nx>e_e2</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>e_e1</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
<span class=nx>dema</span> <span class=o>=</span> <span class=mi>2</span> <span class=o>*</span> <span class=nx>e_e1</span> <span class=o>-</span> <span class=nx>e_e2</span>
<span class=nx>signal</span> <span class=o>=</span> <span class=nx>tema</span> <span class=o>&gt;</span> <span class=nx>dema</span> <span class=o>?</span> <span class=nx>max</span><span class=p>(</span><span class=nx>vh1</span><span class=p>,</span> <span class=nx>vl1</span><span class=p>)</span> <span class=o>:</span> <span class=nx>min</span><span class=p>(</span><span class=nx>vh1</span><span class=p>,</span> <span class=nx>vl1</span><span class=p>)</span>
<span class=nx>is_call</span> <span class=o>=</span> <span class=nx>tema</span> <span class=o>&gt;</span> <span class=nx>dema</span> <span class=nx>and</span> <span class=nx>signal</span> <span class=o>&gt;</span> <span class=nx>low</span> <span class=nx>and</span> <span class=p>(</span><span class=nx>signal</span><span class=o>-</span><span class=nx>signal</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>&gt;</span> <span class=nx>signal</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>-</span><span class=nx>signal</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>
<span class=nx>is_put</span> <span class=o>=</span> <span class=nx>tema</span> <span class=o>&lt;</span> <span class=nx>dema</span> <span class=nx>and</span> <span class=nx>signal</span> <span class=o>&lt;</span> <span class=nx>high</span> <span class=nx>and</span> <span class=p>(</span><span class=nx>signal</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>-</span><span class=nx>signal</span> <span class=o>&gt;</span> <span class=nx>signal</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=o>-</span><span class=nx>signal</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
 
<span class=nx>plotshape</span><span class=p>(</span><span class=nx>is_call</span> <span class=o>?</span> <span class=mi>1</span> <span class=o>:</span> <span class=nx>na</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;BUY ARROW&#34;</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>green</span><span class=p>,</span> <span class=nx>text</span><span class=o>=</span><span class=s2>&#34;*BUY*&#34;</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>shape</span><span class=p>.</span><span class=nx>arrowup</span><span class=p>,</span> <span class=nx>location</span><span class=o>=</span><span class=nx>location</span><span class=p>.</span><span class=nx>belowbar</span><span class=p>)</span>
<span class=nx>plotshape</span><span class=p>(</span><span class=nx>is_put</span> <span class=o>?</span> <span class=o>-</span><span class=mi>1</span> <span class=o>:</span> <span class=nx>na</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;SELL ARROW&#34;</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>red</span><span class=p>,</span> <span class=nx>text</span><span class=o>=</span><span class=s2>&#34;*SELL*&#34;</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>shape</span><span class=p>.</span><span class=nx>arrowdown</span><span class=p>)</span>
<span class=c1>//
</span><span class=c1>//Modified - Rajandran R Supertrend----------------------------------------------------- //       Signal 2
</span><span class=c1></span><span class=nx>Factor</span><span class=o>=</span><span class=nx>input</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=nx>minval</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span><span class=nx>maxval</span> <span class=o>=</span> <span class=mi>000</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Trend Transition Signal&#34;</span><span class=p>)</span>
<span class=nx>Pd</span><span class=o>=</span><span class=nx>input</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=nx>minval</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span><span class=nx>maxval</span> <span class=o>=</span> <span class=mi>100</span><span class=p>)</span>
<span class=nx>Up</span><span class=o>=</span><span class=nx>hl2</span><span class=o>-</span><span class=p>(</span><span class=nx>Factor</span><span class=o>*</span><span class=nx>atr</span><span class=p>(</span><span class=nx>Pd</span><span class=p>))</span>
<span class=nx>Dn</span><span class=o>=</span><span class=nx>hl2</span><span class=o>+</span><span class=p>(</span><span class=nx>Factor</span><span class=o>*</span><span class=nx>atr</span><span class=p>(</span><span class=nx>Pd</span><span class=p>))</span>

<span class=nx>TrendUp</span> <span class=o>=</span> <span class=mf>0.0</span>
<span class=nx>TrendDown</span> <span class=o>=</span> <span class=mf>0.0</span>
<span class=nx>Trend</span> <span class=o>=</span> <span class=mf>0.0</span>
<span class=nx>TrendUp</span> <span class=o>:=</span> <span class=nx>close</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>&gt;</span><span class=nx>TrendUp</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>?</span> <span class=nx>max</span><span class=p>(</span><span class=nx>Up</span><span class=p>,</span><span class=nx>TrendUp</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=o>:</span> <span class=nx>Up</span>
<span class=nx>TrendDown</span> <span class=o>:=</span> <span class=nx>close</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>&lt;</span><span class=nx>TrendDown</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>?</span> <span class=nx>min</span><span class=p>(</span><span class=nx>Dn</span><span class=p>,</span><span class=nx>TrendDown</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=o>:</span> <span class=nx>Dn</span>
<span class=nx>Trend</span> <span class=o>:=</span> <span class=nx>close</span> <span class=o>&gt;</span> <span class=nx>TrendDown</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=mi>1</span><span class=o>:</span> <span class=nx>close</span><span class=o>&lt;</span> <span class=nx>TrendUp</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>?</span> <span class=o>-</span><span class=mi>1</span><span class=o>:</span> <span class=nx>nz</span><span class=p>(</span><span class=nx>Trend</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span><span class=mi>0</span><span class=p>)</span>
 
<span class=nx>plotarrow</span><span class=p>(</span><span class=nx>Trend</span> <span class=o>==</span> <span class=mi>1</span> <span class=nx>and</span> <span class=nx>Trend</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span> <span class=o>?</span> <span class=nx>Trend</span> <span class=o>:</span> <span class=nx>na</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Up Entry Arrow&#34;</span><span class=p>,</span> <span class=nx>colorup</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>rgb</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>255</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span> <span class=mi>85</span><span class=p>),</span> <span class=nx>maxheight</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=nx>minheight</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
<span class=nx>plotarrow</span><span class=p>(</span><span class=nx>Trend</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span> <span class=nx>and</span> <span class=nx>Trend</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span> <span class=o>?</span> <span class=nx>Trend</span> <span class=o>:</span> <span class=nx>na</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Down Entry Arrow&#34;</span><span class=p>,</span> <span class=nx>colordown</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>rgb</span><span class=p>(</span><span class=mi>255</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>85</span><span class=p>),</span> <span class=nx>maxheight</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=nx>minheight</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
<span class=c1>// Moddified [RS]Support and Resistance V0
</span><span class=c1></span><span class=nx>RST</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=nx>title</span><span class=o>=</span><span class=s1>&#39;Support / Resistance length:&#39;</span><span class=p>,</span> <span class=nx>type</span><span class=o>=</span><span class=nx>input</span><span class=p>.</span><span class=nx>integer</span><span class=p>,</span> <span class=nx>defval</span><span class=o>=</span><span class=mi>21</span><span class=p>)</span>
<span class=nx>RSTT</span> <span class=o>=</span> <span class=nx>valuewhen</span><span class=p>(</span><span class=nx>high</span> <span class=o>&gt;=</span> <span class=nx>highest</span><span class=p>(</span><span class=nx>high</span><span class=p>,</span> <span class=nx>RST</span><span class=p>),</span> <span class=nx>high</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<span class=nx>RSTB</span> <span class=o>=</span> <span class=nx>valuewhen</span><span class=p>(</span><span class=nx>low</span> <span class=o>&lt;=</span> <span class=nx>lowest</span><span class=p>(</span><span class=nx>low</span><span class=p>,</span> <span class=nx>RST</span><span class=p>),</span> <span class=nx>low</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<span class=nx>RT2</span> <span class=o>=</span> <span class=nx>plot</span><span class=p>(</span><span class=nx>RSTT</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>RSTT</span> <span class=o>!=</span> <span class=nx>RSTT</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=nx>na</span> <span class=o>:</span> <span class=nx>color</span><span class=p>.</span><span class=nx>red</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>offset</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=nx>RB2</span> <span class=o>=</span> <span class=nx>plot</span><span class=p>(</span><span class=nx>RSTB</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>RSTB</span> <span class=o>!=</span> <span class=nx>RSTB</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=nx>na</span> <span class=o>:</span> <span class=nx>color</span><span class=p>.</span><span class=nx>green</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>offset</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=c1>//
</span><span class=c1>//===============================Directional Projection=======================================//
</span><span class=c1></span><span class=nx>tf2</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=s1>&#39;1&#39;</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Trend Projection TF / Mins/D/W&#34;</span><span class=p>)</span>
<span class=nx>M2</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=s1>&#39;ATR&#39;</span><span class=p>)</span>
<span class=nx>P2</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=mf>13.00</span><span class=p>,</span> <span class=nx>type</span><span class=o>=</span><span class=nx>input</span><span class=p>.</span><span class=kr>float</span><span class=p>)</span>
<span class=nx>W2</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<span class=nx>pf2</span> <span class=o>=</span> <span class=nx>pointfigure</span><span class=p>(</span><span class=nx>syminfo</span><span class=p>.</span><span class=nx>tickerid</span><span class=p>,</span> <span class=s1>&#39;close&#39;</span><span class=p>,</span> <span class=nx>M2</span><span class=p>,</span> <span class=nx>P2</span><span class=p>,</span> <span class=nx>W2</span><span class=p>)</span>
<span class=nx>spfc2</span> <span class=o>=</span> <span class=nx>security</span><span class=p>(</span><span class=nx>pf2</span><span class=p>,</span> <span class=nx>tf2</span><span class=p>,</span> <span class=nx>close</span><span class=p>)</span>
<span class=nx>channel3</span><span class=o>=</span><span class=nx>input</span><span class=p>(</span><span class=kc>false</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Connect Projection High/Low&#34;</span><span class=p>)</span>
<span class=nx>p22</span><span class=o>=</span><span class=nx>plot</span><span class=p>(</span><span class=nx>channel3</span><span class=o>?</span><span class=nx>spfc2</span><span class=o>:</span><span class=nx>spfc2</span><span class=o>==</span><span class=nx>nz</span><span class=p>(</span><span class=nx>spfc2</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span><span class=o>?</span><span class=nx>spfc2</span><span class=o>:</span><span class=nx>na</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>blue</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>plot</span><span class=p>.</span><span class=nx>style_linebr</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Directional Projection&#34;</span><span class=p>,</span> <span class=nx>offset</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=c1>//----------------------------------------------------------------------//
</span></code></pre></div><h2 id=解説>解説</h2><h3 id=指数移動平均線を描画>指数移動平均線を描画</h3><p>指数移動平均線を、上昇中はLime,下降時はRedで描画する。</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>//@version=4
</span><span class=c1></span><span class=nx>study</span><span class=p>(</span><span class=s2>&#34;Vdub Binary Options SniperVX  v1&#34;</span><span class=p>,</span> <span class=nx>overlay</span><span class=o>=</span><span class=kc>true</span><span class=p>,</span> <span class=nx>shorttitle</span><span class=o>=</span><span class=s2>&#34;Vdub_SniperBX_v1&#34;</span><span class=p>)</span>
<span class=c1>//
</span><span class=c1>//====================channel======================
</span><span class=c1></span><span class=nx>len</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=nx>minval</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=nx>src</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Source&#34;</span><span class=p>)</span>
<span class=nx>out</span> <span class=o>=</span> <span class=nx>sma</span><span class=p>(</span><span class=nx>src</span><span class=p>,</span> <span class=nx>len</span><span class=p>)</span>
<span class=nx>last8h</span> <span class=o>=</span> <span class=nx>highest</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=mi>13</span><span class=p>)</span>
<span class=nx>lastl8</span> <span class=o>=</span> <span class=nx>lowest</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=mi>13</span><span class=p>)</span>
<span class=nx>bearish</span> <span class=o>=</span> <span class=nx>cross</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span><span class=nx>out</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span> <span class=nx>and</span> <span class=nx>close</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>&gt;</span> <span class=nx>close</span>
<span class=nx>bullish</span> <span class=o>=</span> <span class=nx>cross</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span><span class=nx>out</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span> <span class=nx>and</span> <span class=nx>close</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>&lt;</span> <span class=nx>close</span>
<span class=nx>channel2</span><span class=o>=</span><span class=nx>input</span><span class=p>(</span><span class=kc>false</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Bar Channel On/Off&#34;</span><span class=p>)</span>
<span class=nx>ul2</span><span class=o>=</span><span class=nx>plot</span><span class=p>(</span><span class=nx>channel2</span><span class=o>?</span><span class=nx>last8h</span><span class=o>:</span><span class=nx>last8h</span><span class=o>==</span><span class=nx>nz</span><span class=p>(</span><span class=nx>last8h</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span><span class=o>?</span><span class=nx>last8h</span><span class=o>:</span><span class=nx>na</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>black</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>plot</span><span class=p>.</span><span class=nx>style_linebr</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Candle body resistance level top&#34;</span><span class=p>,</span> <span class=nx>offset</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=nx>ll2</span><span class=o>=</span><span class=nx>plot</span><span class=p>(</span><span class=nx>channel2</span><span class=o>?</span><span class=nx>lastl8</span><span class=o>:</span><span class=nx>lastl8</span><span class=o>==</span><span class=nx>nz</span><span class=p>(</span><span class=nx>lastl8</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span><span class=o>?</span><span class=nx>lastl8</span><span class=o>:</span><span class=nx>na</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>black</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>plot</span><span class=p>.</span><span class=nx>style_linebr</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Candle body resistance level bottom&#34;</span><span class=p>,</span> <span class=nx>offset</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=c1>//
</span><span class=c1>//--------------------Trend colour ema------------------------------------------------//    ema trend direction trigger For Singals 1 &amp; 2
</span><span class=c1></span><span class=nx>src0</span> <span class=o>=</span> <span class=nx>close</span><span class=p>,</span> <span class=nx>len0</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=mi>13</span><span class=p>,</span> <span class=nx>minval</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Trend Change EMA&#34;</span><span class=p>)</span>
<span class=nx>ema0</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>src0</span><span class=p>,</span> <span class=nx>len0</span><span class=p>)</span>
<span class=nx>plot_color</span> <span class=o>=</span> <span class=nx>ema0</span> <span class=o>&gt;=</span> <span class=nx>ema0</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>  <span class=o>?</span> <span class=nx>color</span><span class=p>.</span><span class=nx>lime</span><span class=o>:</span> <span class=nx>ema0</span> <span class=o>&lt;</span> <span class=nx>ema0</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>?</span> <span class=nx>color</span><span class=p>.</span><span class=nx>red</span> <span class=o>:</span> <span class=nx>na</span>
<span class=nx>plot</span><span class=p>(</span><span class=nx>ema0</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;EMA&#34;</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>plot</span><span class=p>.</span><span class=nx>style_line</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>color</span> <span class=o>=</span> <span class=nx>plot_color</span><span class=p>)</span>
</code></pre></div><ul><li><a href=https://jp.tradingview.com/pine-script-reference/#fun_sma target=_blank>sma</a>
:<ul><li><code>sma(source, length) → series[float]</code></li><li>単純移動平均を計算する</li></ul></li><li>highest/lowest:<ul><li>構文: <code>highest(source, length) → series[float]</code></li><li>指定された期間(length)の期間の最高値を返す</li></ul></li><li>cross:<ul><li>構文: <code>cross(x, y) → series[bool]</code></li><li>2つの系列が互いに交差する場合はtrue、そうでない場合はfalse</li></ul></li><li><a href=https://jp.tradingview.com/pine-script-reference/#fun_nz target=_blank>nz</a>
:<ul><li>NaN値を直列の0(または指定された値)に置き換える</li></ul></li><li><a href=https://jp.tradingview.com/pine-script-reference/#fun_ema target=_blank>ema</a>
:<ul><li>構文: <code>ema(source, length) → series[float]</code></li><li>指数加重移動平均を返す</li></ul></li><li><code>plot_color = ema0 >= ema0[2] ? lime: ema0 &lt; ema0[2] ? red : na</code><ul><li>指数移動平均で、２個前のバーよりも高ければ<code>lime</code>、低ければ<code>red</code></li></ul></li></ul><h3 id=売買シグナルを描画する>売買シグナルを描画する</h3><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>//
</span><span class=c1>//--Modified vyacheslav.shindin-------------------------------------------------//           Signal 1
</span><span class=c1>//Configured ema signal output
</span><span class=c1></span><span class=nx>slow</span> <span class=o>=</span> <span class=mi>8</span>
<span class=nx>fast</span> <span class=o>=</span> <span class=mi>5</span>
<span class=nx>vh1</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>highest</span><span class=p>(</span><span class=nx>avg</span><span class=p>(</span><span class=nx>low</span><span class=p>,</span> <span class=nx>close</span><span class=p>),</span> <span class=nx>fast</span><span class=p>),</span> <span class=mi>5</span><span class=p>)</span>
<span class=nx>vl1</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>lowest</span><span class=p>(</span><span class=nx>avg</span><span class=p>(</span><span class=nx>high</span><span class=p>,</span> <span class=nx>close</span><span class=p>),</span> <span class=nx>slow</span><span class=p>),</span> <span class=mi>8</span><span class=p>)</span>
<span class=c1>//
</span><span class=c1></span><span class=nx>e_ema1</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=nx>e_ema2</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>e_ema1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=nx>e_ema3</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>e_ema2</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=nx>tema</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>*</span> <span class=p>(</span><span class=nx>e_ema1</span> <span class=o>-</span> <span class=nx>e_ema2</span><span class=p>)</span> <span class=o>+</span> <span class=nx>e_ema3</span>
<span class=c1>//
</span><span class=c1></span><span class=nx>e_e1</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>close</span><span class=p>,</span> <span class=mi>8</span><span class=p>)</span>
<span class=nx>e_e2</span> <span class=o>=</span> <span class=nx>ema</span><span class=p>(</span><span class=nx>e_e1</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
<span class=nx>dema</span> <span class=o>=</span> <span class=mi>2</span> <span class=o>*</span> <span class=nx>e_e1</span> <span class=o>-</span> <span class=nx>e_e2</span>
<span class=nx>signal</span> <span class=o>=</span> <span class=nx>tema</span> <span class=o>&gt;</span> <span class=nx>dema</span> <span class=o>?</span> <span class=nx>max</span><span class=p>(</span><span class=nx>vh1</span><span class=p>,</span> <span class=nx>vl1</span><span class=p>)</span> <span class=o>:</span> <span class=nx>min</span><span class=p>(</span><span class=nx>vh1</span><span class=p>,</span> <span class=nx>vl1</span><span class=p>)</span>
<span class=nx>is_call</span> <span class=o>=</span> <span class=nx>tema</span> <span class=o>&gt;</span> <span class=nx>dema</span> <span class=nx>and</span> <span class=nx>signal</span> <span class=o>&gt;</span> <span class=nx>low</span> <span class=nx>and</span> <span class=p>(</span><span class=nx>signal</span><span class=o>-</span><span class=nx>signal</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>&gt;</span> <span class=nx>signal</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>-</span><span class=nx>signal</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>
<span class=nx>is_put</span> <span class=o>=</span> <span class=nx>tema</span> <span class=o>&lt;</span> <span class=nx>dema</span> <span class=nx>and</span> <span class=nx>signal</span> <span class=o>&lt;</span> <span class=nx>high</span> <span class=nx>and</span> <span class=p>(</span><span class=nx>signal</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>-</span><span class=nx>signal</span> <span class=o>&gt;</span> <span class=nx>signal</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=o>-</span><span class=nx>signal</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
 
<span class=nx>plotshape</span><span class=p>(</span><span class=nx>is_call</span> <span class=o>?</span> <span class=mi>1</span> <span class=o>:</span> <span class=nx>na</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;BUY ARROW&#34;</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>green</span><span class=p>,</span> <span class=nx>text</span><span class=o>=</span><span class=s2>&#34;*BUY*&#34;</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>shape</span><span class=p>.</span><span class=nx>arrowup</span><span class=p>,</span> <span class=nx>location</span><span class=o>=</span><span class=nx>location</span><span class=p>.</span><span class=nx>belowbar</span><span class=p>)</span>
<span class=nx>plotshape</span><span class=p>(</span><span class=nx>is_put</span> <span class=o>?</span> <span class=o>-</span><span class=mi>1</span> <span class=o>:</span> <span class=nx>na</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;SELL ARROW&#34;</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>red</span><span class=p>,</span> <span class=nx>text</span><span class=o>=</span><span class=s2>&#34;*SELL*&#34;</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>shape</span><span class=p>.</span><span class=nx>arrowdown</span><span class=p>)</span>
</code></pre></div><ul><li><a href=https://jp.tradingview.com/pine-script-reference/#fun_plotshape target=_blank>plotshape</a>
:<ul><li>構文: <code>plotshape(series, title, style, location, color, transp, offset, text, textcolor, editable, size, show_last, display) → void</code></li><li>チャート上に視覚的な図形を描写する</li></ul></li></ul><h3 id=トレンドを表す大きな矢印を表示する>トレンドを表す大きな矢印を表示する</h3><p>大きなトレンド転換を表す矢印を表示する。</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>//
</span><span class=c1>//Modified - Rajandran R Supertrend----------------------------------------------------- //       Signal 2
</span><span class=c1></span><span class=nx>Factor</span><span class=o>=</span><span class=nx>input</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=nx>minval</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span><span class=nx>maxval</span> <span class=o>=</span> <span class=mi>000</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Trend Transition Signal&#34;</span><span class=p>)</span>
<span class=nx>Pd</span><span class=o>=</span><span class=nx>input</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=nx>minval</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span><span class=nx>maxval</span> <span class=o>=</span> <span class=mi>100</span><span class=p>)</span>
<span class=nx>Up</span><span class=o>=</span><span class=nx>hl2</span><span class=o>-</span><span class=p>(</span><span class=nx>Factor</span><span class=o>*</span><span class=nx>atr</span><span class=p>(</span><span class=nx>Pd</span><span class=p>))</span>
<span class=nx>Dn</span><span class=o>=</span><span class=nx>hl2</span><span class=o>+</span><span class=p>(</span><span class=nx>Factor</span><span class=o>*</span><span class=nx>atr</span><span class=p>(</span><span class=nx>Pd</span><span class=p>))</span>

<span class=nx>TrendUp</span> <span class=o>=</span> <span class=mf>0.0</span>
<span class=nx>TrendDown</span> <span class=o>=</span> <span class=mf>0.0</span>
<span class=nx>Trend</span> <span class=o>=</span> <span class=mf>0.0</span>
<span class=nx>TrendUp</span> <span class=o>:=</span> <span class=nx>close</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>&gt;</span><span class=nx>TrendUp</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>?</span> <span class=nx>max</span><span class=p>(</span><span class=nx>Up</span><span class=p>,</span><span class=nx>TrendUp</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=o>:</span> <span class=nx>Up</span>
<span class=nx>TrendDown</span> <span class=o>:=</span> <span class=nx>close</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>&lt;</span><span class=nx>TrendDown</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>?</span> <span class=nx>min</span><span class=p>(</span><span class=nx>Dn</span><span class=p>,</span><span class=nx>TrendDown</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=o>:</span> <span class=nx>Dn</span>
<span class=nx>Trend</span> <span class=o>:=</span> <span class=nx>close</span> <span class=o>&gt;</span> <span class=nx>TrendDown</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=mi>1</span><span class=o>:</span> <span class=nx>close</span><span class=o>&lt;</span> <span class=nx>TrendUp</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>?</span> <span class=o>-</span><span class=mi>1</span><span class=o>:</span> <span class=nx>nz</span><span class=p>(</span><span class=nx>Trend</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span><span class=mi>0</span><span class=p>)</span>
 
<span class=nx>plotarrow</span><span class=p>(</span><span class=nx>Trend</span> <span class=o>==</span> <span class=mi>1</span> <span class=nx>and</span> <span class=nx>Trend</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span> <span class=o>?</span> <span class=nx>Trend</span> <span class=o>:</span> <span class=nx>na</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Up Entry Arrow&#34;</span><span class=p>,</span> <span class=nx>colorup</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>rgb</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>255</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span> <span class=mi>85</span><span class=p>),</span> <span class=nx>maxheight</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=nx>minheight</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
<span class=nx>plotarrow</span><span class=p>(</span><span class=nx>Trend</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span> <span class=nx>and</span> <span class=nx>Trend</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=mi>1</span> <span class=o>?</span> <span class=nx>Trend</span> <span class=o>:</span> <span class=nx>na</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Down Entry Arrow&#34;</span><span class=p>,</span> <span class=nx>colordown</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>rgb</span><span class=p>(</span><span class=mi>255</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>85</span><span class=p>),</span> <span class=nx>maxheight</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=nx>minheight</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
<span class=c1>// Moddified [RS]Support and Resistance V0
</span><span class=c1></span><span class=nx>RST</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=nx>title</span><span class=o>=</span><span class=s1>&#39;Support / Resistance length:&#39;</span><span class=p>,</span> <span class=nx>type</span><span class=o>=</span><span class=nx>input</span><span class=p>.</span><span class=nx>integer</span><span class=p>,</span> <span class=nx>defval</span><span class=o>=</span><span class=mi>21</span><span class=p>)</span>
<span class=nx>RSTT</span> <span class=o>=</span> <span class=nx>valuewhen</span><span class=p>(</span><span class=nx>high</span> <span class=o>&gt;=</span> <span class=nx>highest</span><span class=p>(</span><span class=nx>high</span><span class=p>,</span> <span class=nx>RST</span><span class=p>),</span> <span class=nx>high</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<span class=nx>RSTB</span> <span class=o>=</span> <span class=nx>valuewhen</span><span class=p>(</span><span class=nx>low</span> <span class=o>&lt;=</span> <span class=nx>lowest</span><span class=p>(</span><span class=nx>low</span><span class=p>,</span> <span class=nx>RST</span><span class=p>),</span> <span class=nx>low</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<span class=nx>RT2</span> <span class=o>=</span> <span class=nx>plot</span><span class=p>(</span><span class=nx>RSTT</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>RSTT</span> <span class=o>!=</span> <span class=nx>RSTT</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=nx>na</span> <span class=o>:</span> <span class=nx>color</span><span class=p>.</span><span class=nx>red</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>offset</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=nx>RB2</span> <span class=o>=</span> <span class=nx>plot</span><span class=p>(</span><span class=nx>RSTB</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>RSTB</span> <span class=o>!=</span> <span class=nx>RSTB</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=nx>na</span> <span class=o>:</span> <span class=nx>color</span><span class=p>.</span><span class=nx>green</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=nx>offset</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</code></pre></div><ul><li><a href=https://jp.tradingview.com/pine-script-reference/#fun_atr target=_blank>atr</a>
:</li></ul><h3 id=ステップを表示する>ステップを表示する</h3><p>指定した平均線(デフォルトATR)を表示する</p><div class=highlight><pre class=chroma><code class=language-javascript data-lang=javascript><span class=c1>//
</span><span class=c1>//===============================Directional Projection=======================================//
</span><span class=c1></span><span class=nx>tf2</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=s1>&#39;1&#39;</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Trend Projection TF / Mins/D/W&#34;</span><span class=p>)</span>
<span class=nx>M2</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=s1>&#39;ATR&#39;</span><span class=p>)</span>
<span class=nx>P2</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=mf>13.00</span><span class=p>,</span> <span class=nx>type</span><span class=o>=</span><span class=nx>input</span><span class=p>.</span><span class=kr>float</span><span class=p>)</span>
<span class=nx>W2</span> <span class=o>=</span> <span class=nx>input</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<span class=nx>pf2</span> <span class=o>=</span> <span class=nx>pointfigure</span><span class=p>(</span><span class=nx>syminfo</span><span class=p>.</span><span class=nx>tickerid</span><span class=p>,</span> <span class=s1>&#39;close&#39;</span><span class=p>,</span> <span class=nx>M2</span><span class=p>,</span> <span class=nx>P2</span><span class=p>,</span> <span class=nx>W2</span><span class=p>)</span>
<span class=nx>spfc2</span> <span class=o>=</span> <span class=nx>security</span><span class=p>(</span><span class=nx>pf2</span><span class=p>,</span> <span class=nx>tf2</span><span class=p>,</span> <span class=nx>close</span><span class=p>)</span>
<span class=nx>channel3</span><span class=o>=</span><span class=nx>input</span><span class=p>(</span><span class=kc>false</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Connect Projection High/Low&#34;</span><span class=p>)</span>
<span class=nx>p22</span><span class=o>=</span><span class=nx>plot</span><span class=p>(</span><span class=nx>channel3</span><span class=o>?</span><span class=nx>spfc2</span><span class=o>:</span><span class=nx>spfc2</span><span class=o>==</span><span class=nx>nz</span><span class=p>(</span><span class=nx>spfc2</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span><span class=o>?</span><span class=nx>spfc2</span><span class=o>:</span><span class=nx>na</span><span class=p>,</span> <span class=nx>color</span><span class=o>=</span><span class=nx>color</span><span class=p>.</span><span class=nx>blue</span><span class=p>,</span> <span class=nx>linewidth</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=nx>style</span><span class=o>=</span><span class=nx>plot</span><span class=p>.</span><span class=nx>style_linebr</span><span class=p>,</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;Directional Projection&#34;</span><span class=p>,</span> <span class=nx>offset</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=c1>//----------------------------------------------------------------------//
</span></code></pre></div><ul><li><a href=https://jp.tradingview.com/pine-script-reference/#fun_pointfigure target=_blank>pointfigure</a>
:<ul><li><code>pointfigure(symbol, source, style, param, reversal) → string</code></li><li>ポイント&フュイギュア値を要求するティッカー識別子を作成する</li></ul></li></ul></div><div class=prev-next><a class=prev href=https://tech.choihack.com/post/tradingview/zigzag%E8%A7%A3%E8%AA%AC/><article class=article-card><header class=article-card-header><h2>ZigZag解説</h2></header><section class=article-card-content><p>はじめに ZigZagのインジケーターを見つけたので、自分で作れるレベルまで理解を進めたいと思います。
PineScript //@version=3 study("ZigZag!",overlay=true) use_current_res=input(true,title="Use Current Resolution?") length = input(title="Length", type=integer, defval=10) phase = input(title="Phase", type=integer, defval=50) power = input(title="Power", type=integer, defval=2) line_widht = input(title="Line Width", type=integer, defval=1) do_col = input(true,title="color up and down moves?") //UseFixed = input(title="Use Fixed Timeframes?", type=bool, defval=false) htf = input(title="Higher Timeframe", defval="005", options=["M", "W", "3D", "D", "720", "360", "240", "180", "120", "060", "030", "015", "010", "005", "003", "001"]) o = security(tickerid, htf, open) h = security(tickerid, htf, high) l = security(tickerid, htf, low) c = security(tickerid, htf, close) src = use_current_res ?...</p></section><footer class=article-card-footer><time>2021-09-10</time></footer></article></a><a class=next href=https://tech.choihack.com/post/tradingview/binaryoption%E3%83%86%E3%82%B9%E3%83%88%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88/><article class=article-card><header class=article-card-header><h2>BinaryOptionテストテンプレート</h2></header><section class=article-card-content><p>はじめに バイオプと通常のFXとは全く異なるため、通常TradingViewではバイオプロジックの検証ができません。
ですが、指定した期間で強制決済した結果を集計することで、バイオプとしてのロジックを検証することができます。
今回は、テンプレートを見つけましたので確認していきます。
https://jp.tradingview.com/script/pvnR5RYJ-Binary-Options-Strategy-Template/
解説 以下は終値が単純移動平均より上ならBUY、下ならSELLという単純なロジックだけでバイオプをした場合の検証です。
これを実際のロジックに置き換えて作る必要があります。
その前提で、このスクリプトを見ていきましょう。
//@version=4 strategy("Binary Options Strategy Template", overlay=true) // In this code we track the bar where a position was opened and close the position // aftera specified number of bars. The objective of this script is testing long/short signals // for knowing the amount of times it would turn a profit or not. // User input for amount of bars till close barsTillClose = input(5, minval=2, title="Amount of Bars Till Close Position") // SIMPLE ENTRY LOGIC (insert long/short signal here) sma = sma(close, 14) strategy....</p></section><footer class=article-card-footer><time>2021-09-11</time></footer></article></a></div></article><aside class=aside><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#pinescript>PineScript</a></li><li><a href=#解説>解説</a><ul><li><a href=#指数移動平均線を描画>指数移動平均線を描画</a></li><li><a href=#売買シグナルを描画する>売買シグナルを描画する</a></li><li><a href=#トレンドを表す大きな矢印を表示する>トレンドを表す大きな矢印を表示する</a></li><li><a href=#ステップを表示する>ステップを表示する</a></li></ul></li></ul></nav><h2>関連書籍</h2><div class=amazon><p>Amazon</p><a target=_blank href="https://www.amazon.co.jp/dp/4344920791/ref=nosim?tag=tech-choihack03-22"><img class=amazon-img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4344920791&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL350_&tag=tech-choihack03-22"><section class=amazon-title><p>あなたの FX 投資を成功へと導くTradingView究極ガイド</p></section></a></div><div class="ads side"><h2>おすすめ</h2><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=21&l=ur1&category=kindleunlimited&banner=178KN9KSS2XDCENS02G2&f=ifr&linkID=81378df7265b0adc45354f106ee4f650&t=tech-choihack-22&tracking_id=tech-choihack-22" width=125 height=125 scrolling=no border=0 marginwidth=0 style=border:none frameborder=0></iframe></div></aside></main></body><footer class=footer><h2>本は聴く時代に！圧倒的おすすめ！</h2><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=12&l=ur1&category=audible&banner=04TW4TSNDNB96FMCBT82&f=ifr&linkID=4522149f1c95f7594ee105cf8eef4890&t=peperon41410c-22&tracking_id=peperon41410c-22" width=300 height=250 scrolling=no border=0 marginwidth=0 style=border:none frameborder=0></iframe><p class=text-center>© - 2021 - こつこつナレッジ</p></footer><script src=https://tech.choihack.com/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script></html>