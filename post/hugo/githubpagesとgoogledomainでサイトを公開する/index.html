<!doctype html><html lang><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>GitHubPagesとGoogleDomainでサイトを公開する - こつこつナレッジ</title><meta name=description content="はじめに GitHubPagesの利点は、いくつか制限があるものの以下のメリットがあります。
 TLS対応（Let&rsquo;s Encrypt) 独自ドメイン対応 無料  GoogleDomainでは１４００円のドメインを使用しています。
このドメインにサブドメインを追加することで、複数ドメインを追加料金なく使用しています。
なので、私はいくつかブログを運用していますが、年間合計１４００円しかかかっていません。
しかも、GitHubのActionsなど優秀な機能の恩恵を請けられるので、メンテナンスコストが非常に少なくなります。
GoogleDomainでドメイン取得 サブドメインを追加する方法を説明します。
GoogleDomainの管理画面から マイドメイン > 自分のドメイン > DNS > カスタムレコードを管理
すると、ドメインの設定をカスタマイズできるようになります。
新しいレコードを追加 し、以下のように入力します。
 ホスト名： サブドメインにしたい文字列（別名とするサブドメインの指定） タイプ： CNAME（データで指定したホストに対して、別名を登録する方式） TTL：3600（1時間の有効期限） データ：XXXXXXX.github.io. （自身のGitHubのホスト）  GitHubActionsを使ってHugoをビルドする ActionsのWorkflowに以下を登録します。
name: gh-pages on: push: branches: - master workflow_dispatch: jobs: build: runs-on: ubuntu-20.04 steps: - name: Checkout uses: actions/checkout@v2 with: submodules: true - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: '0.85.0' extended: true - name: Hugo build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: github_token: ${{ secrets."><meta name=author content><link rel=stylesheet href=https://tech.choihack.com/css/style.286185dba9215e324d8dc6ecb145e7c39ce0899ad05a79dbf6a66e8012be1cfc.css><link href=https://tech.choihack.com/custom.css rel=stylesheet><link rel=apple-touch-icon href=https://tech.choihack.com/apple-touch-icon.png><link rel=icon href=https://tech.choihack.com/favicon.ico><meta name=generator content="Hugo 0.85.0"><script async src="https://www.googletagmanager.com/gtag/js?id=G-V3H6ME1VJT"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-V3H6ME1VJT',{anonymize_ip:!1})}</script><meta property="og:title" content="GitHubPagesとGoogleDomainでサイトを公開する"><meta property="og:description" content="はじめに GitHubPagesの利点は、いくつか制限があるものの以下のメリットがあります。
 TLS対応（Let&rsquo;s Encrypt) 独自ドメイン対応 無料  GoogleDomainでは１４００円のドメインを使用しています。
このドメインにサブドメインを追加することで、複数ドメインを追加料金なく使用しています。
なので、私はいくつかブログを運用していますが、年間合計１４００円しかかかっていません。
しかも、GitHubのActionsなど優秀な機能の恩恵を請けられるので、メンテナンスコストが非常に少なくなります。
GoogleDomainでドメイン取得 サブドメインを追加する方法を説明します。
GoogleDomainの管理画面から マイドメイン > 自分のドメイン > DNS > カスタムレコードを管理
すると、ドメインの設定をカスタマイズできるようになります。
新しいレコードを追加 し、以下のように入力します。
 ホスト名： サブドメインにしたい文字列（別名とするサブドメインの指定） タイプ： CNAME（データで指定したホストに対して、別名を登録する方式） TTL：3600（1時間の有効期限） データ：XXXXXXX.github.io. （自身のGitHubのホスト）  GitHubActionsを使ってHugoをビルドする ActionsのWorkflowに以下を登録します。
name: gh-pages on: push: branches: - master workflow_dispatch: jobs: build: runs-on: ubuntu-20.04 steps: - name: Checkout uses: actions/checkout@v2 with: submodules: true - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: '0.85.0' extended: true - name: Hugo build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: github_token: ${{ secrets."><meta property="og:type" content="article"><meta property="og:url" content="https://tech.choihack.com/post/hugo/githubpages%E3%81%A8googledomain%E3%81%A7%E3%82%B5%E3%82%A4%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-07-25T09:32:14+09:00"><meta property="article:modified_time" content="2021-07-25T09:32:14+09:00"><script>window.onload=function(){var a=Array.prototype.slice.call(document.querySelectorAll("pre"),0);a.forEach(function(b){var c=b.firstElementChild,d=c.dataset.lang,e=d?d.split(":")[1]:null,a;e&&(a=document.createElement('div'),a.textContent=e,a.classList.add('code-name'),b.insertBefore(a,c))})}</script></head><header class=header><nav class=nav><h1 class=logo><a href=https://tech.choihack.com/>こつこつナレッジ</a></h1><ul class=menu><li><a href=/>TOP</a></li><li><a href=/post/hugo>Hugo</a></li><li><a href=/post/gas>GAS</a></li><li><a href=/post/tradingview>TradingView</a></li><li><a href=/post/wordpress>WordPress</a></li><li><a href=/post/rubyonrails>RubyOnRails</a></li><li><a href=/search>検索</a></li></ul></nav><nav class=breadcrumb><ul><li><a href=https://tech.choihack.com/>TOP</a></li><li><a href=https://tech.choihack.com/post/>投稿</a></li><li><a href=https://tech.choihack.com/post/hugo/>Hugo</a></li><li class=active>GitHubPagesとGoogleDomainでサイトを公開する</li></ul></nav></header><body class="dark page"></body><main class=post><article><header class=post-header><h1 class=post-title>GitHubPagesとGoogleDomainでサイトを公開する</h1><div class=post-meta>2021.07.25</div></header><div class=post-content><h2 id=はじめに>はじめに</h2><p>GitHubPagesの利点は、いくつか制限があるものの以下のメリットがあります。</p><ul><li>TLS対応（Let&rsquo;s Encrypt)</li><li>独自ドメイン対応</li><li>無料</li></ul><p>GoogleDomainでは１４００円のドメインを使用しています。<br>このドメインにサブドメインを追加することで、複数ドメインを追加料金なく使用しています。</p><p>なので、私はいくつかブログを運用していますが、年間合計１４００円しかかかっていません。<br>しかも、GitHubのActionsなど優秀な機能の恩恵を請けられるので、メンテナンスコストが非常に少なくなります。</p><h2 id=googledomainでドメイン取得>GoogleDomainでドメイン取得</h2><p>サブドメインを追加する方法を説明します。<br>GoogleDomainの管理画面から <code>マイドメイン</code> > 自分のドメイン > <code>DNS</code> > <code>カスタムレコードを管理</code></p><p>すると、ドメインの設定をカスタマイズできるようになります。<br><code>新しいレコードを追加</code> し、以下のように入力します。</p><ul><li>ホスト名： サブドメインにしたい文字列（別名とするサブドメインの指定）</li><li>タイプ： CNAME（データで指定したホストに対して、別名を登録する方式）</li><li>TTL：3600（1時間の有効期限）</li><li>データ：XXXXXXX.github.io. （自身のGitHubのホスト）</li></ul><h2 id=githubactionsを使ってhugoをビルドする>GitHubActionsを使ってHugoをビルドする</h2><p>ActionsのWorkflowに以下を登録します。</p><pre><code>name: gh-pages

on:
  push:
    branches:
      - master
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-20.04

    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          submodules: true
      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: '0.85.0'
          extended: true
      - name: Hugo build
        run: hugo --minify
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
</code></pre><p>このWorkflowの概要としては、</p><ul><li>masterブランチが変更された場合に動作する</li><li>サブモジュールがあれば読み込む</li><li>Hugoの0.85.0を拡張付きでインストールする（SASSなどを使用する場合は拡張が必要）</li><li>publicディレクトリを公開する</li></ul><p class=info>ビルド実行前に<code>/static/CNAME</code>内に、GoogleDomainで指定したDomainを記載します。<br>そうすることで、GitHubPagesの独自ドメインに反映されます。</p><h2 id=githubpagesの設定>GitHubPagesの設定</h2><p>以下の設定は反映に時間がかかる場合があるので、動作しなければしばらく待ってみましょう。</p><h3 id=sourceの設定>Sourceの設定</h3><p>GitHubActionsのビルドが完了すると、<code>gh-pages</code>というブランチにHugoのビルド結果が作られているはずです。<br><code>Settings</code> > <code>Pages</code>で<code>source</code>に<code>gh-pages</code>を選択し、rootを選びましょう。</p><h3 id=custom-domain>Custom domain</h3><p><code>/static/CNAME</code>が適切に設定されていると、<code>Custom domain</code>は勝手に設定されているはずです。<br>GitHubPagesから<code>Custom domain</code>を設定した場合、自動でCNAMEが設定されます。<br>ただし、このファイルはHugoをビルドしたブランチには反映されないため、<code>static</code>ディレクトリ以下に配置する必要があります。</p><h3 id=enforce-https>Enforce HTTPS</h3><p>チェックを付けるとHTTPSで公開してくれます。</p></div><div class=prev-next><a class=prev href=https://tech.choihack.com/post/hugo/shortcode/><article class=article-card><header class=article-card-header><h2>ShortcodeでAmazonのリンクを作成する</h2></header><section class=article-card-content><p>はじめに Hugoでブログを書いていて、頻出するようなHTMLを自動で簡単に出力できるようにしたいと思いました。
そこで使用できるのがShortcodeの機能です。
今回はAmazonのアフィリエイトリンクを作成するためのShortcodeを作成します。
Shortcodeの基本 Shortcodeは、事前に定義した小さな処理を呼び出すための仕組みです。
ここでは書き方を整理します。
/layouts/shortcodes/以下にSHORTCODE.htmlをファイルを作成すると
SHORTCODEがショートコード名になる Shortcodeを呼び出す場合は
{{&lt; ショートコード名 "値" >}}
{{&lt; ショートコード名 パラメータ名="値" >}} パラメータを取り出す場合は
{{ .Get 0 }}（0はパラメータのインデックス）
{{ .Get パラメータ名 }} 間に文字を挟み込める
{{&lt; highlight go >}} A bunch of code here {{&lt; /highlight >}} 挟み込んだ文字を取り出す場合は
{{ .Inner }} 挟み込んだ文字は書き方によって処理のされ方が異なる
{{&lt; >}} -> HTML
{{% %}} -> Markdown Built-inショートコードが存在する。 Figure Youtube Tweet Instagram etc. ShortcodeのサンプルをMarkdownで表示したい場合は
{{&lt;/* shortcode */>}} Amazonのショートコードを作成 サンプルにAmazonのアフィリエイトリンク用のショートコードを作成します。...</p></section><footer class=article-card-footer><time>2021-07-25</time></footer></article></a></div></article><aside class=aside><h2>目次</h2><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#googledomainでドメイン取得>GoogleDomainでドメイン取得</a></li><li><a href=#githubactionsを使ってhugoをビルドする>GitHubActionsを使ってHugoをビルドする</a></li><li><a href=#githubpagesの設定>GitHubPagesの設定</a><ul><li><a href=#sourceの設定>Sourceの設定</a></li><li><a href=#custom-domain>Custom domain</a></li><li><a href=#enforce-https>Enforce HTTPS</a></li></ul></li></ul></nav><h2>関連書籍</h2><div class=amazon><a target=_blank href="https://www.amazon.co.jp/dp/B08T1PQ7H8/ref=nosim?tag=tech-choihack0b-22"><img class=amazon-img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B08T1PQ7H8&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL350_&tag=tech-choihack0b-22"><section class=amazon-title><p>Amazon</p><p>Hugoで始める静的サイト構築入門　静的サイトジェネレーターで作る自作サイト</p></section></a></div><div class="ads side"><h2>おすすめ</h2><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=21&l=ur1&category=kindleunlimited&banner=178KN9KSS2XDCENS02G2&f=ifr&linkID=81378df7265b0adc45354f106ee4f650&t=tech-choihack-22&tracking_id=tech-choihack-22" width=125 height=125 scrolling=no border=0 marginwidth=0 style=border:none frameborder=0></iframe></div></aside></main></body><div class="ads footer"><iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=48&l=ur1&category=audible&banner=193071V4XXGHG0SQJB02&f=ifr&linkID=2f33203e23e50f0542adbd748b7ba6d8&t=tech-choihack-22&tracking_id=tech-choihack-22" width=728 height=90 scrolling=no border=0 marginwidth=0 style=border:none frameborder=0></iframe></div><footer class=footer><p class=text-center>© - 2021 - こつこつナレッジ</p></footer><script src=https://tech.choihack.com/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script></html>